<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Discovery</title>
    <!-- Use a leading slash so the browser requests /style/style.css -->
    <link rel="stylesheet" href="/style/style.css">
    <!-- Same for discovery.js -->
    <script src="/src/discovery.js" defer></script>
</head>
<body>

<div class="header">
    <h1>Whaaa</h1>
    <div class="home-buttons">
        <a href="/">Home</a>
        <a href ="/discovery">Discovery</a>
        <a href="/events">Events</a>
        <a href="/rnd">Free Space</a>
        <a href="/about-us">About us</a>
    </div>
    <div class="user-buttons">
        <button><a href="/login" id="login-button">Log in</a></button>
        <button><a href="/register" id="register-button">Register</a></button>
        <span id="username"></span>
        <span id="dashboard-button"></span>
        <span id="logout-button"></span>
    </div>
</div>

<div class="discovery-content">
    <h1>Discovery</h1>

    <!-- The search UI -->
    <input type="text" id="searchBoardInput" placeholder="Search by name, description, or hashtags...">
    <button id="searchBoardButton">Search</button>

    <!-- IMPORTANT: Use this container so discovery.js can fill it -->
    <ul id="boardResults" class="board-container"></ul>
</div>



<script>
    document.addEventListener('DOMContentLoaded', () => {
        fetch('/username')
            .then(response => response.json())
            .then(data => {
                if (data.username) {
                    document.getElementById('username').textContent = `Logged in as: ${data.username}`;
                    document.getElementById('dashboard-button').innerHTML = `<a href="/dashboard">Dashboard</a>`;
                    document.getElementById('logout-button').innerHTML = `<a href="/logout">Logout</a>`;
                    document.getElementById('login-button').style.display = 'none';
                    document.getElementById('register-button').style.display = 'none';
                }
            });
    });
</script>
</body>
</html>
